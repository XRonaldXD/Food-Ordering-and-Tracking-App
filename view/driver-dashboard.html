<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Dashboard - Food Ordering & Tracking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ffffff;
        }

        .dashboard-header {
            background: #1f1f1f;
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid #2d2d2d;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            margin-bottom: 2rem;
            color: #ffffff;
        }

        .dashboard-header h1 {
            color: #ffffff;
        }

        .dashboard-header p {
            color: #b0b0b0;
        }

        .stat-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-radius: 15px;
            padding: 1.5rem;
            color: white;
            transition: all 0.3s ease;
            border: none;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.5);
        }

        .stat-card.active {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
        }

        .stat-card.total {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .stat-card.earnings {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
        }

        .stat-card h3 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .stat-card p {
            margin-bottom: 0;
            opacity: 0.9;
        }

        .order-card {
            background: #1f1f1f;
            border: 1px solid #2d2d2d;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            color: #ffffff;
        }

        .order-card h5 {
            color: #ffffff;
        }

        .order-card p {
            color: #ffffff;
        }

        .order-card strong {
            color: #ffffff;
        }

        .order-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
            border-color: #28a745;
        }

        .order-card.active {
            border-color: #ffc107;
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        .badge {
            padding: 0.5rem 1rem;
            border-radius: 10px;
            font-weight: 600;
        }

        .nav-tabs {
            border-bottom: 2px solid #2d2d2d;
        }

        .nav-tabs .nav-link {
            color: #b0b0b0;
            border: none;
            padding: 1rem 1.5rem;
        }

        .nav-tabs .nav-link.active {
            color: #ffffff;
            background: transparent;
            border-bottom: 3px solid #28a745;
        }

        .btn-accept {
            background: #28a745;
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .btn-accept:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-deliver {
            background: #17a2b8;
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .btn-deliver:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(23, 162, 184, 0.4);
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #ffffff;
        }

        .empty-state h4 {
            color: #ffffff;
        }

        .empty-state p {
            color: #b0b0b0;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
            color: #b0b0b0;
        }

        .customer-info {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            color: #ffffff;
        }

        .customer-info p {
            color: #ffffff;
        }

        .customer-info strong {
            color: #ffffff;
        }

        .location-icon {
            color: #28a745;
            font-size: 1.2rem;
        }

        .time-badge {
            background: #2a2a2a;
            color: #28a745;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
        }

        .modal-content {
            background: #1f1f1f;
            border: 1px solid #2d2d2d;
            color: #ffffff;
        }

        .modal-header {
            border-bottom: 1px solid #2d2d2d;
            color: #ffffff;
        }

        .modal-header h4 {
            color: #ffffff;
        }

        .modal-footer {
            border-top: 1px solid #2d2d2d;
        }

        .modal-body label {
            color: #ffffff;
        }

        .form-control,
        .form-select {
            background: #2a2a2a;
            border: 2px solid #3d3d3d;
            color: #ffffff;
            border-radius: 10px;
        }

        .form-control:focus,
        .form-select:focus {
            background: #333333;
            border-color: #28a745;
            color: #ffffff;
            box-shadow: 0 0 0 0.25rem rgba(40, 167, 69, 0.25);
        }

        .btn-close {
            filter: invert(1);
        }

        /* Global text fixes */
        p {
            color: #ffffff;
        }

        small {
            color: #e0e0e0;
        }

        .text-center {
            color: #ffffff;
        }

        .text-muted {
            color: #ffffff !important;
        }

        .order-card .text-muted {
            color: #e0e0e0 !important;
        }

        .order-card small {
            color: #e0e0e0;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <div id="navbar"></div>
    <script>
        async function loadNavbar() {
            try {
                const response = await fetch('navbar.html');
                if (!response.ok) throw new Error('Failed to load navbar');
                document.getElementById('navbar').innerHTML = await response.text();
            } catch (error) {
                console.error('Error loading navbar:', error);
            }
        }
        loadNavbar();
    </script>
    <div class="container-fluid my-5">
        <div class="dashboard-header">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1><i class="bi bi-truck"></i> Driver Dashboard</h1>
                    <p class="mb-0" style="color: #b0b0b0;">Manage your deliveries and track earnings</p>
                </div>
                <div>
                    <button class="btn btn-success" onclick="refreshData()">
                        <i class="bi bi-arrow-clockwise"></i> Refresh
                    </button>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="row mb-4" id="statsContainer">
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="stat-card active">
                    <i class="bi bi-box-seam" style="font-size: 2rem;"></i>
                    <h3 id="activeDeliveries">0</h3>
                    <p>Active Deliveries</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="stat-card">
                    <i class="bi bi-check-circle" style="font-size: 2rem;"></i>
                    <h3 id="totalDeliveries">0</h3>
                    <p>Total Deliveries</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="stat-card total">
                    <i class="bi bi-calendar-day" style="font-size: 2rem;"></i>
                    <h3 id="todayDeliveries">0</h3>
                    <p>Today's Deliveries</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="stat-card earnings">
                    <i class="bi bi-currency-dollar" style="font-size: 2rem;"></i>
                    <h3 id="totalEarnings">$0</h3>
                    <p>Total Earnings</p>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs" id="driverTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="available-tab" data-bs-toggle="tab" data-bs-target="#available"
                    type="button">
                    <i class="bi bi-basket"></i> Available Orders
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="active-tab" data-bs-toggle="tab" data-bs-target="#active" type="button">
                    <i class="bi bi-truck"></i> Active Deliveries
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button">
                    <i class="bi bi-clock-history"></i> Delivery History
                </button>
            </li>
        </ul>

        <div class="tab-content mt-4" id="driverTabsContent">
            <!-- Available Orders -->
            <div class="tab-pane fade show active" id="available" role="tabpanel">
                <div id="availableOrders">
                    <div class="text-center py-5">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Deliveries -->
            <div class="tab-pane fade" id="active" role="tabpanel">
                <div id="activeOrders">
                    <div class="text-center py-5">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Delivery History -->
            <div class="tab-pane fade" id="history" role="tabpanel">
                <div id="historyOrders">
                    <div class="text-center py-5">
                        <div class="spinner-border text-success" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delivery Confirmation Modal -->
    <div class="modal fade" id="deliveryModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delivery</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="deliveryOrderId">
                    <div class="mb-3">
                        <label class="form-label">Delivery Notes (Optional)</label>
                        <textarea class="form-control" id="deliveryNotes" rows="3"
                            placeholder="Add any notes about the delivery..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="confirmDelivery()">Confirm Delivery</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let availableOrdersData = [];
        let activeOrdersData = [];
        let historyOrdersData = [];

        // Load navbar
        async function loadNavbar() {
            try {
                const response = await fetch('navbar.html');
                if (!response.ok) throw new Error('Failed to load navbar');
                document.getElementById('navbar').innerHTML = await response.text();
            } catch (error) {
                console.error('Error loading navbar:', error);
            }
        }

        // Check driver access
        async function checkDriverAccess() {
            try {
                const response = await fetch('/auth/me');
                if (!response.ok) {
                    window.location.href = '/login';
                    return false;
                }
                const data = await response.json();
                if (data.user.role !== 'driver' && data.user.role !== 'admin') {
                    alert('Access denied. Driver role required.');
                    window.location.href = '/';
                    return false;
                }
                return true;
            } catch (error) {
                console.error('Error checking access:', error);
                window.location.href = '/login';
                return false;
            }
        }

        // Load driver statistics
        async function loadStats() {
            try {
                const response = await fetch('/driver/stats');
                if (!response.ok) throw new Error('Failed to load stats');
                const stats = await response.json();

                document.getElementById('activeDeliveries').textContent = stats.activeDeliveries;
                document.getElementById('totalDeliveries').textContent = stats.totalDeliveries;
                document.getElementById('todayDeliveries').textContent = stats.todayDeliveries;
                document.getElementById('totalEarnings').textContent = `$${stats.totalEarnings.toFixed(2)}`;
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Load available orders
        async function loadAvailableOrders() {
            try {
                const response = await fetch('/driver/available-orders');
                if (!response.ok) throw new Error('Failed to load available orders');
                availableOrdersData = await response.json();
                renderAvailableOrders();
            } catch (error) {
                console.error('Error loading available orders:', error);
                document.getElementById('availableOrders').innerHTML = '<div class="empty-state"><i class="bi bi-exclamation-circle"></i><h4>Failed to load orders</h4></div>';
            }
        }

        // Render available orders
        function renderAvailableOrders() {
            const container = document.getElementById('availableOrders');

            if (availableOrdersData.length === 0) {
                container.innerHTML = '<div class="empty-state"><i class="bi bi-basket"></i><h4>No orders available</h4><p>Check back soon for new delivery opportunities</p></div>';
                return;
            }

            container.innerHTML = availableOrdersData.map(order => `
                <div class="order-card">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <div class="d-flex align-items-start mb-2">
                                <i class="bi bi-basket2-fill text-success me-3" style="font-size: 2rem;"></i>
                                <div>
                                    <h5 class="mb-1">${order.foodId.name}</h5>
                                    <p class="text-muted mb-1"><i class="bi bi-shop"></i> ${order.foodId.restaurant}</p>
                                    <span class="badge bg-success">Ready for Pickup</span>
                                </div>
                            </div>
                            <div class="customer-info">
                                <p class="mb-2"><strong><i class="bi bi-person"></i> Customer:</strong> ${order.createdBy.name}</p>
                                <p class="mb-2"><strong><i class="bi bi-basket"></i> Quantity:</strong> ${order.quantity}</p>
                                <p class="mb-2"><strong><i class="bi bi-currency-dollar"></i> Amount:</strong> $${(order.totalAmount || 0).toFixed(2)}</p>
                                <p class="mb-0"><strong><i class="bi bi-clock"></i> Ready At:</strong> ${new Date(order.readyAt).toLocaleString()}</p>
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="time-badge mb-3">
                                <i class="bi bi-lightning-charge"></i> Act Fast!
                            </div>
                            <button class="btn btn-accept w-100" onclick="acceptOrder('${order._id}')">
                                <i class="bi bi-check-circle"></i> Accept Delivery
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Load active orders
        async function loadActiveOrders() {
            try {
                const response = await fetch('/driver/my-orders');
                if (!response.ok) throw new Error('Failed to load active orders');
                const orders = await response.json();
                activeOrdersData = orders.filter(o => o.status === 'out_for_delivery');
                historyOrdersData = orders.filter(o => o.status === 'delivered');

                renderActiveOrders();
                renderHistoryOrders();
            } catch (error) {
                console.error('Error loading active orders:', error);
            }
        }

        // Render active orders
        function renderActiveOrders() {
            const container = document.getElementById('activeOrders');

            if (activeOrdersData.length === 0) {
                container.innerHTML = '<div class="empty-state"><i class="bi bi-truck"></i><h4>No active deliveries</h4><p>Accept an order to start delivering</p></div>';
                return;
            }

            container.innerHTML = activeOrdersData.map(order => `
                <div class="order-card active">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <div class="d-flex align-items-start mb-2">
                                <i class="bi bi-box-seam text-warning me-3" style="font-size: 2rem;"></i>
                                <div>
                                    <h5 class="mb-1">${order.foodId.name}</h5>
                                    <p class="text-muted mb-1"><i class="bi bi-shop"></i> ${order.foodId.restaurant}</p>
                                    <span class="badge bg-warning text-dark">Out for Delivery</span>
                                </div>
                            </div>
                            <div class="customer-info">
                                <p class="mb-2"><strong><i class="bi bi-person"></i> Customer:</strong> ${order.createdBy.name}</p>
                                <p class="mb-2"><strong><i class="bi bi-envelope"></i> Email:</strong> ${order.createdBy.email}</p>
                                <p class="mb-2"><strong><i class="bi bi-basket"></i> Quantity:</strong> ${order.quantity}</p>
                                <p class="mb-2"><strong><i class="bi bi-currency-dollar"></i> Amount:</strong> $${(order.totalAmount || 0).toFixed(2)}</p>
                                <p class="mb-2"><strong><i class="bi bi-clock"></i> Picked Up:</strong> ${new Date(order.pickedUpAt).toLocaleString()}</p>
                                ${order.customerNotes ? `<p class="mb-0"><strong><i class="bi bi-chat-left-text"></i> Notes:</strong> ${order.customerNotes}</p>` : ''}
                            </div>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="time-badge mb-3">
                                <i class="bi bi-truck"></i> In Transit
                            </div>
                            <button class="btn btn-primary w-100 mb-2" onclick="updateLocation('${order._id}')">
                                <i class="bi bi-geo-alt"></i> Update Location
                            </button>
                            <button class="btn btn-deliver w-100" onclick="openDeliveryModal('${order._id}')">
                                <i class="bi bi-check-circle"></i> Mark as Delivered
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Render history orders
        function renderHistoryOrders() {
            const container = document.getElementById('historyOrders');

            if (historyOrdersData.length === 0) {
                container.innerHTML = '<div class="empty-state"><i class="bi bi-clock-history"></i><h4>No delivery history</h4><p>Your completed deliveries will appear here</p></div>';
                return;
            }

            container.innerHTML = historyOrdersData.map(order => `
                <div class="order-card">
                    <div class="row align-items-center">
                        <div class="col-md-10">
                            <div class="d-flex align-items-start">
                                <i class="bi bi-check-circle-fill text-success me-3" style="font-size: 2rem;"></i>
                                <div>
                                    <h5 class="mb-1">${order.foodId.name}</h5>
                                    <p class="text-muted mb-1"><i class="bi bi-shop"></i> ${order.foodId.restaurant}</p>
                                    <span class="badge bg-success">Delivered</span>
                                    <p class="mt-2 mb-0"><small class="text-muted">
                                        <i class="bi bi-clock"></i> Delivered on ${new Date(order.deliveredAt).toLocaleString()} | 
                                        <i class="bi bi-currency-dollar"></i> Earned: $${((order.totalAmount || 0) * 0.1).toFixed(2)}
                                    </small></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 text-end">
                            <h5 class="text-success">$${(order.totalAmount || 0).toFixed(2)}</h5>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Accept order
        async function acceptOrder(orderId) {
            if (!confirm('Accept this delivery?')) return;

            try {
                const response = await fetch(`/driver/orders/${orderId}/accept`, {
                    method: 'POST'
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error);
                }

                alert('Order accepted! You can now start the delivery.');
                await refreshData();
            } catch (error) {
                console.error('Error accepting order:', error);
                alert('Failed to accept order: ' + error.message);
            }
        }

        // Open delivery modal
        function openDeliveryModal(orderId) {
            document.getElementById('deliveryOrderId').value = orderId;
            document.getElementById('deliveryNotes').value = '';
            new bootstrap.Modal(document.getElementById('deliveryModal')).show();
        }

        // Confirm delivery
        async function confirmDelivery() {
            const orderId = document.getElementById('deliveryOrderId').value;
            const notes = document.getElementById('deliveryNotes').value;

            try {
                const response = await fetch(`/driver/orders/${orderId}/deliver`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ notes })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error);
                }

                bootstrap.Modal.getInstance(document.getElementById('deliveryModal')).hide();
                alert('Order marked as delivered!');
                await refreshData();
            } catch (error) {
                console.error('Error marking as delivered:', error);
                alert('Failed to mark as delivered: ' + error.message);
            }
        }

        // Update driver location for tracking
        async function updateLocation(orderId) {
            try {
                // Check if geolocation is available
                if (!navigator.geolocation) {
                    alert('Geolocation is not supported by your browser');
                    return;
                }

                // Show loading state
                const btn = event.target;
                const originalHTML = btn.innerHTML;
                btn.disabled = true;
                btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Updating...';

                // Get current position
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        try {
                            const { latitude, longitude } = position.coords;

                            // Send location to server
                            const response = await fetch('/tracking/location', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    orderId,
                                    latitude,
                                    longitude
                                })
                            });

                            if (!response.ok) {
                                const error = await response.json();
                                throw new Error(error.error || 'Failed to update location');
                            }

                            // Success
                            btn.innerHTML = '<i class="bi bi-check-circle"></i> Location Updated!';
                            setTimeout(() => {
                                btn.innerHTML = originalHTML;
                                btn.disabled = false;
                            }, 2000);

                            // Also update estimated time if not set
                            await updateEstimatedTime(orderId, 30); // Default 30 minutes
                        } catch (error) {
                            console.error('Error sending location:', error);
                            alert('Failed to update location: ' + error.message);
                            btn.innerHTML = originalHTML;
                            btn.disabled = false;
                        }
                    },
                    (error) => {
                        console.error('Geolocation error:', error);
                        alert('Unable to get your location. Please enable location services.');
                        btn.innerHTML = originalHTML;
                        btn.disabled = false;
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } catch (error) {
                console.error('Error updating location:', error);
                alert('Failed to update location: ' + error.message);
            }
        }

        // Update estimated delivery time
        async function updateEstimatedTime(orderId, minutes) {
            try {
                await fetch(`/tracking/${orderId}/estimated-time`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ estimatedMinutes: minutes })
                });
            } catch (error) {
                console.error('Error updating estimated time:', error);
            }
        }

        // Auto-update location every 30 seconds for active deliveries
        let locationUpdateInterval = null;

        function startLocationTracking() {
            if (locationUpdateInterval) {
                clearInterval(locationUpdateInterval);
            }

            locationUpdateInterval = setInterval(() => {
                // Update location for all active orders
                activeOrdersData.forEach(order => {
                    updateLocationSilently(order._id);
                });
            }, 30000); // Every 30 seconds
        }

        async function updateLocationSilently(orderId) {
            if (!navigator.geolocation) return;

            navigator.geolocation.getCurrentPosition(
                async (position) => {
                    try {
                        const { latitude, longitude } = position.coords;
                        await fetch('/tracking/location', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ orderId, latitude, longitude })
                        });
                    } catch (error) {
                        console.error('Silent location update failed:', error);
                    }
                },
                (error) => console.error('Geolocation error:', error),
                { enableHighAccuracy: true, timeout: 5000, maximumAge: 30000 }
            );
        }

        // Refresh all data
        async function refreshData() {
            await Promise.all([
                loadStats(),
                loadAvailableOrders(),
                loadActiveOrders()
            ]);

            // Start auto-location tracking if there are active orders
            if (activeOrdersData.length > 0) {
                startLocationTracking();
            }
        }

        // Auto-refresh every 30 seconds
        setInterval(refreshData, 30000);

        // Initialize
        document.addEventListener('DOMContentLoaded', async function () {
            const hasAccess = await checkDriverAccess();
            if (hasAccess) {
                await refreshData();
            }
        });
    </script>

    <script src="js/checkAuth.js"></script>

</body>

</html>